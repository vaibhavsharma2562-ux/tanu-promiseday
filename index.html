<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Promise Day Tanu ‚ù§Ô∏è</title>
<style>
body{
margin:0;
overflow:hidden;
background:radial-gradient(circle at center,#0b0f2f,#000);
font-family:Segoe UI,sans-serif;
color:white;
text-align:center;
}

canvas{position:fixed;top:0;left:0;}

#startScreen,#quizSection,#cubeSection,#endMessage{
position:absolute;
top:50%;left:50%;
transform:translate(-50%,-50%);
}

#quizSection,#cubeSection,#endMessage{display:none;}

button{
padding:12px 25px;
border:none;
border-radius:30px;
font-size:18px;
margin:10px;
cursor:pointer;
}

.yesBtn{background:#ff4d88;color:white;}
.noBtn{background:#333;color:white;position:absolute;}

.glow{text-shadow:0 0 20px pink,0 0 40px red;}

.cube-container{
perspective:1000px;
width:220px;
height:220px;
margin:auto;
}

.cube{
width:100%;
height:100%;
position:relative;
transform-style:preserve-3d;
animation:rotate 20s infinite linear;
}

.cube img{
position:absolute;
width:220px;
height:220px;
object-fit:cover;
}

@keyframes rotate{
from{transform:rotateX(0) rotateY(0);}
to{transform:rotateX(360deg) rotateY(360deg);}
}

.falling{
position:absolute;
width:80px;
animation:fall 12s linear infinite;
}

@keyframes fall{
from{top:-100px;}
to{top:100vh;}
}
</style>
</head>
<body>

<canvas id="space"></canvas>

<audio id="bgMusic" src="music.mp3" loop></audio>

<div id="startScreen">
<h1 class="glow">Happy Promise Day Tanu ‚ù§Ô∏è</h1>
<p>You are written in my stars.</p>
<button onclick="startExperience()">Enter Our Universe</button>
</div>

<div id="quizSection">
<h2 id="questionText"></h2>
<button class="yesBtn" onclick="nextQuestion()">Yes ‚ù§Ô∏è</button>
<button class="noBtn" id="noBtn">No üíî</button>
</div>

<div id="cubeSection">
<h2 class="glow">Our Memories ‚ú®</h2>
<div class="cube-container">
<div class="cube" id="cube"></div>
</div>
</div>

<div id="endMessage">
<h1 class="glow">Forever Tanu ‚ù§Ô∏è</h1>
<p>
In every universe that ever exists,  
I will still find you.  
I will still choose you.  
I promise forever.
</p>
</div>

<script>
const canvas=document.getElementById("space");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

let stars=[];
let audioContext, analyser, dataArray;
let pulse=1;
let state="floating";

for(let i=0;i<500;i++){
stars.push({
x:Math.random()*canvas.width,
y:Math.random()*canvas.height,
size:Math.random()*2
});
}

function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);

if(analyser){
analyser.getByteFrequencyData(dataArray);
let bass=dataArray.slice(0,20).reduce((a,b)=>a+b)/20;
pulse=1 + bass/200;
}

stars.forEach(s=>{
ctx.beginPath();
ctx.arc(s.x,s.y,s.size*pulse,0,Math.PI*2);
ctx.fillStyle="rgba(255,255,255,0.9)";
ctx.fill();
});

requestAnimationFrame(draw);
}
draw();

function setupAudio(){
const audio=document.getElementById("bgMusic");
audioContext=new (window.AudioContext||window.webkitAudioContext)();
const source=audioContext.createMediaElementSource(audio);
analyser=audioContext.createAnalyser();
source.connect(analyser);
analyser.connect(audioContext.destination);
analyser.fftSize=256;
dataArray=new Uint8Array(analyser.frequencyBinCount);
}

function animateTo(points){
stars.forEach((s,i)=>{
if(points[i]){
s.x+=(points[i].x-s.x)*0.03;
s.y+=(points[i].y-s.y)*0.03;
}
});
}

function textPoints(text){
let temp=document.createElement("canvas");
let t=temp.getContext("2d");
temp.width=canvas.width;
temp.height=canvas.height;
t.font="bold 120px Arial";
t.fillText(text,canvas.width/4,canvas.height/2);
let data=t.getImageData(0,0,temp.width,temp.height).data;
let pts=[];
for(let y=0;y<temp.height;y+=6){
for(let x=0;x<temp.width;x+=6){
let index=(y*temp.width+x)*4;
if(data[index+3]>128){pts.push({x,y});}
}
}
return pts;
}

function heartPoints(){
let pts=[];
let cx=canvas.width/2;
let cy=canvas.height/2;
for(let t=0;t<Math.PI*2;t+=0.05){
let x=16*Math.pow(Math.sin(t),3);
let y=-(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t));
pts.push({x:cx+x*15,y:cy+y*15});
}
return pts;
}

const questions=[
"Will you stay mine forever?",
"Will you trust me always?",
"Will you forgive my mistakes?",
"Will you laugh with me forever?",
"Will you support my dreams?",
"Will you walk beside me always?",
"Will you choose me every day?",
"Will you love me endlessly?",
"Will you stay loyal forever?",
"Will you promise forever?"
];

let q=0;

function startExperience(){
document.getElementById("startScreen").style.display="none";
document.getElementById("quizSection").style.display="block";

setupAudio();
document.getElementById("bgMusic").play();

showQuestion();

let namePts=textPoints("T A N U");
setInterval(()=>animateTo(namePts),30);
}

function showQuestion(){
document.getElementById("questionText").innerText=questions[q];
}

function nextQuestion(){
q++;
if(q<questions.length){
showQuestion();
}else{
document.getElementById("quizSection").style.display="none";
let heart=heartPoints();
setInterval(()=>animateTo(heart),30);

setTimeout(()=>{
document.getElementById("cubeSection").style.display="block";
createCube();
},4000);

setTimeout(()=>{
document.getElementById("cubeSection").style.display="none";
document.getElementById("endMessage").style.display="block";
},22000);
}
}

const noBtn=document.getElementById("noBtn");
noBtn.addEventListener("mouseover",function(){
this.style.top=Math.random()*80+"%";
this.style.left=Math.random()*80+"%";
});

function createCube(){
const cube=document.getElementById("cube");
for(let i=1;i<=20;i++){
let img=document.createElement("img");
img.src="pic"+i+".jpg.jpeg";
img.style.transform=`rotateY(${i*18}deg) translateZ(150px)`;
cube.appendChild(img);
}

for(let i=21;i<=30;i++){
let fall=document.createElement("img");
fall.src="pic"+i+".jpg.jpeg";
fall.className="falling";
fall.style.left=Math.random()*100+"vw";
document.body.appendChild(fall);
}
}
</script>

</body>
</html>
